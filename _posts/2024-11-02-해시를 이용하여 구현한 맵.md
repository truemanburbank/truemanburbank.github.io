---
title: 해시를 이용하여 구현한 맵
date: 2024-11-02
categories: [Etc, TIL]
tags: [Python, Hash, map]
---

Python의 `dict`(해시맵)는 **트리** 구조가 아닌 **해시 테이블**을 기반으로 구현되어 있다.

해시를 이용한 맵은 해싱한 Key를 통해 Key-Value를 저장해둔 자료구조이다.

## 해싱이란?

Key 값이 주어졌을 때 항상 동일한 해시값을 보장해 주는 방식을 의미한다. 즉, 데이터를 저장하고 빠르게 찾을 수 있도록 **특정 규칙에 따라 값을 변환**하는 방법이다.
Python의 `dict`에서는 내부적으로 `hash()` 함수가 사용된다.  함수는 키의 데이터 타입과 값을 기반으로 해시 값을 생성하며, 그 해시 값은 `dict`의 배열(버킷)에서 위치를 결정하는 데 사용된다.

그러나 Key값의 중복이 생길 수 있기 때문에 이를 해결하기 위해 **체이닝**과 **오픈 어드레싱** 방법을 사용한다. 파이썬에서는 **오픈 어드레싱** 방법을 사용한다. 

### 체이닝 방식

동일한 해시값으로 인한 해시 충돌이 발생할 경우, 동일한 해시값에 해당하는 Key끼리 서로 연결해가며 저장해둔 방식이다.

![image](https://github.com/user-attachments/assets/123cbedf-1467-4c1f-b3f7-cdb6e8e7e2db)

해시값이 같으면, LinkedList 자료구조를 이용하여 해시값의 메모리 위치에 Key - Value 데이터를 하나씩 추가해서 서로 연결해가며 저장한다.

이러한 체이닝 방법은 동일한 Key값을 가지는 곳에 Value를 저장하기 위해 알맞은 구조이다. 데이터를 찾을 때와, 삽입할 때 O(1)의 시간복잡도가 소요되지만, 해시값의 위치에 연결된 데이터가 많다면 최대 O(N)의 시간복잡도가 소요된다. 

### 오픈 어드레싱 방식

해시값에 해당하는 메모리 위치에 Key-Value가 있다면, 그 위치부터 탐색해가며 아무 값도 없는 위치에 Key-Value를 넣는 방식이다. 

![image](https://github.com/user-attachments/assets/c20a6148-cda8-4145-a453-9c45c3a28a7c)

위 그림에서 47과 55를 삽입할 때 오픈 어드레싱 방식을 사용했다. 

오픈 어드레싱 방식은 메모리를 효율적으로 사용할 수 있지만, 단점으로는 최악의 경우 해시값의 충돌이 일어나 비어 있는 메모리 위치를 찾을 때, 시간 복잡도는 O(메모리의 크기)가 된다. 그렇지만 평균적으로는 O(1)의 시간복잡도를 보장한다.