---
title: 2장 AWS 컴퓨팅 서비스
date: 2024-11-01
categories: [Cloud, AWS]
tags: [Cloud, AWS, EC2]
---
# AWS 컴퓨팅 서비스

퍼블릭 클라우드에서 컴퓨팅 자원을 활용하여 다양한 워크로드를 수행할 수 있는 서비스이다.

다음은 대표적인 AWS 컴퓨팅 서비스이다.

- EC2(Elastic Compute Cloud)
    - 클라우드 환경에서 서버 자원을 인스턴스라는 가상 머신 형태로 제공하는 가장 기본적인 AWS 컴퓨팅 서비스
- ECS(Elastic Container Service)
    - EC2 기반 관리형 클러스터에서 실행되는 컨테이너 형태의 자원에 대해 배포, 스케줄링, 스케일링 등을 관리하는 서비스
- Lambda
    - 서버리스 컴퓨팅 서비스로, 서버리스라는 말 그대로 별도의 서버 설정이 없는 환경을 제공하여 코드만 실행해 주는 서비스
- Lightsail
    - 독립적인 환경을 제공하며, 최소한의 설정만으로도 손쉽게 사용 가능한 컴퓨팅 서비스

<aside>
💡

Elastic이라는 단어가 빈번하게 나오는데?

- 탄력적인
- 컴퓨팅 자원에 대해 원하는 만큼 확장하거나 축소하여 유연하게 사용할 수 있는 개념
</aside>

# Amazon EC2

### 주요 제공 기능

- 운영 체제
    - 리눅스, 윈도우, macOS
- CPU 옵션
    - Arm, x86
- 다양한 인스턴스 유형 제공
    - 범용 및 워크로드에 맞게 최적화 가능
- 구매 옵션
    - 온디맨드, 예약 인스턴스, 스팟 인스턴스 등

Amazon EC2는 인스턴스라는 가상 컴퓨팅 환경을 기반으로 하며, AMI(Amazon Machine Image)를 이용하여 인스턴스에 필요한 소프트웨어 정보를 정의한다. 사용자가 요구하는 CPU, 메모리, 디스크, 운영 체제, 소프트웨어 등을 제공하여 워크로드에 맞는 최적화된 가상의 서버를 생성하고 관리할 수 있다.

### 인스턴스 유형

[컴퓨팅 - Amazon EC2 인스턴스 유형 - AWS](https://aws.amazon.com/ko/ec2/instance-types/)

- 범용
    - 균형 있는 컴퓨팅 자원을 제공
- 컴퓨팅 최적화
    - 고성능 프로세서를 활용하는 컴퓨팅 집약적인 애플리케이션에 적합
- 메모리 최적화
    - 메모리에서 대규모 데이터를 처리하는 워크로드에 적합
- 가속화된 컴퓨팅
    - GPU 기반의 고성능 컴퓨팅이 실행되는 환경에 적합
- 스토리지 최적화
    - 로컬 디스크에 매우 큰 데이터의 액세스를 요구하는 워크로드에 적합

각 인스턴스 유형별로 명칭을 부여해서 CPU, 메모리, 네트워크 등 자원을 정의한다. 

### 인스턴스 상태

![인스턴스 상태](https://github.com/user-attachments/assets/0c7d4c17-f66c-44b2-9a25-ee2d285c0b20)

- 최초 인스턴스를 시작하는 행위(Launch)
    - pending → running (특별한 이상이 없을 경우)
- 실행 중인 인스턴스를 중지하는 행위(Stop or hibernate)
    - running → stopping → stopped
    - 인스턴스 종료가 아닌 일시적 중지 상태로 얼마든지 다시 시작 가능
- 중지된 인스턴스를 시작하는 행위(Start)
    - stopped → pending → running
- 중지된 인스턴스를 종료하는 행위(Terminate)
    - stopped → shutting-down → terminated
    - 인스턴스 영구 삭제
- 실행 중인 인스턴스를 종료하는 행위(Terminate)
    - running → shutting-down → terminated
    - 인스턴스 영구 삭제

<aside>
💡

‘stopped’와 ‘terminated’ 상태 차이를 명확히 알자!

</aside>

### AMI

AMI(Amazon Machine Image)는 인스턴스를 시작할 때 필요한 정보를 제공하는 것으로 운영 체제와 소프트웨어를 적절히 구성한 상태로 제공되는 템플릿이다. 인스턴스를 생성할 경우 AMI를 지정해야 하며, 하나의 AMI로 동일한 구성의 여러 인스턴스를 손쉽게 생성할 수 있다. 

- 사용자 정의 AMI
- AWS Marketplace에서 제공하는 서드 파티용 AMI
- 기본 AMI

### Amazon EC2 스토리지

AMI를 통해 Amazon EC2 인스턴스 환경을 설정했다면, 다음으로 어떤 저장소를 사용할지 결정해야 한다. Amazon EC2 인스턴스용 스토리지 유형은 기본적으로 인스턴스 스토어(Instance store)와 블록 스토리지인 Amazon EBS(Elastic Block Store)로 나뉜다.

- 인스턴스 스토어
    - 인스턴스에 바로 붙어 있는 저장소로, Amazon EC2를 생성하면 기본적으로 존재하는 스토리지이다. 다만 일부 인스턴스 유형은 인스턴스 스토어를 지원하지 않는다.
    - 매우 빠른 I/O를 보장한다.
    - EC2 인스턴스를 중지하거나 종료하면 인스턴스 스토어에 저장된 데이터가 모두 손실된다.
    - 임시적인 데이터 저장소로 생각할 수 있으며, 장기적으로 보존해야 하는 데이터는 인스턴스 스토어에 저장하지 않는 것이 좋다.
- Amazon EBS
    - 인스턴스에 연결 및 제거를 하는 형태로 구성되는 블록 스토리지이다. 인스턴스와 직접 연결된 구조가 아닌 인스턴스가 네트워킹을 통해 Amazon EBS에 접근하여 연결되는 구조로, 영구 보존이 가능한 스토리지이다.
    - 관리 콘솔을 통해 스냅샷을 생성하여 백업하거나 Amazon EBS 연결을 해제한 후 다른 인스턴스에 연결할 수 있다는 특징이 있다.

| 구분 | 인스턴스 스토어 | Amazon EBS |
| --- | --- | --- |
| 인스턴스 연결 | 직접 연결 | 네트워킹 연결 |
| I/O 속도 | 빠름 | 보통 |
| 데이터 보관 | 임시 | 영구 |
| 스냅샷(백업) | 불가 | 가능 |

### Amazon EC2 네트워킹

![네트워킹](https://github.com/user-attachments/assets/3836eab7-8cdc-48ef-873a-e54db5842ddb)

- Amazon VPC(Virtual Private Cloud)
    - AWS 퍼블릭 클라우드 안에서 논리적으로 격리된 가상의 클라우드 네트워크이다.
    - 생성된 Amazon EC2 인스턴스는 별도로 구성된 하나의 Amazon VPC 안에 생성되어 네트워킹된다.
- 네트워크 인터페이스
    - 네트워킹을 수행하려면 네트워크 인터페이스가 필요하다.
    - AWS에서는 ENI(Elastic Network Interface)라는 논리적 네트워크 인터페이스가 VPC 내 생성되며 ENI를 EC2 인스턴스에 연결해서 네트워킹을 수행한다.
- IP 주소
    - 네트워크 인터페이스에는 IP(Internet Protocol) 주소가 있으며, IP 주소로 대상을 구분하고 네트워킹을 수행한다.
    - 프라이빗 IP는 내부 구간의 통신을 위한 사설 IP이다. (VPC 내부에서)
    - 퍼블릭 IP는 외부 구간의 통신을 위한 공인 IP이다.

### Amazon EC2 보안

- 보안 그룹
    - Amazon EC2 인스턴스의 송수신 트래픽을 제어하는 가상의 방화벽 역할을 한다.
    - 수신 트래픽에 대한 인바운드 규칙과 송신 트래픽에 대한 아웃바운드 규칙으로 되어 있으며, 대상 트래픽에 대한 허용과 거부를 결정한다.
    - 즉 Amazon EC2 인스턴스로 들어오는 트래픽을 허용 또는 거부하거나 반대로 나가는 트래픽을 허용 또는 거부하는 규칙을 정의할 수 있다.
    - 트래픽을 정의하는 방법에는 프로토콜, 포트 번호, IP 대역 등이 있다.
- 키 페어
    - Amazon EC2 인스턴스에 연결할 때 자격을 증명하는 보안 키이다.
    - 퍼블릭 키는 Amazon EC2 인스턴스에 저장되고, 프라이빗 키는 사용자 컴퓨터에 별도로 저장된다.

### Amazon EC2 모니터링

모니터링은 서비스 안정성과 가용성, 성능 유지에 필요한 중요한 영역이다. 특히나 불특정 다수에게 제공되는 서비스는 언제 어느 시점에 트래픽이 몰려와 부하가 발생할지 알 수 없다. Amazon EC2의 자원은 유한하며, 자원 이상의 부하기 있을 때는 분명 장애가 발생할 수 있다.

실제 모니터링 및 정보를 수행할 때는 다음과 같은 모니터링 계획을 정의해서 생성해야 한다.

<aside>
💡

- 모니터링 목표
- 모니터링 대상 자원
- 모니터링 빈도
- 모니터링 수행 도구
- 모니터링 작업을 수행할 사람
- 문제가 발생할 때 경보를 알려야 할 대상
</aside>

![모니터링](https://github.com/user-attachments/assets/85d20519-fc1c-4caf-8720-acc08d2da397)

- 수동 모니터링 도구
    - 관리자가 직접 관리 콘솔을 이용하여 모니터링을 수행하는 것이다.
    - Amazon EC2 대시보드에서 간단한 통계 정보를 확인하거나, Amazon CloudWatch라는 모니터링 전용 서비스를 이용하여 상세한 통계 정보를 모니터링 할 수 있다.
- 자동 모니터링 도구
    - 대상 자원의 지표에 대해 임곗값을 정하고, 임계값을 초과하면 경보를 내리는 형태의 동적인 모니터링 방법을 의미한다.
    - Amazon CloudWatch 경보 시스템을 이용하여 동적으로 단일 지표를 관찰하고 지정된 임곗값을 기준으로 경보 작업(예, Amazon SNS)을 수행할 수 있다.

### Amazon EC2 인스턴스 구입 옵션

- 온디맨드 인스턴스
    - 시작하는 인스턴스에 대한 비용을 초 단위로 지불
- Saving Plans
    - 1년 또는 3년 동안 시간당 비용을 약정하여 일관된 컴퓨팅 사용량을 제공
- 예약 인스턴스
    - 1년 또는 3년 동안 인스턴스 유형과 리전을 약정하여 일관된 인스턴스를 제공
- 스팟 인스턴스
    - 미사용 중인 인스턴스에 대해 경매 방식 형태로 할당하는 방식